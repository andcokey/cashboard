<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CashBoard</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700;900&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #0f172a; color: #e2e8f0; font-family: 'Noto Sans JP', sans-serif; }
    select option { background: #1e293b; color: #e2e8f0; }
    input[type="date"]::-webkit-calendar-picker-indicator,
    input[type="month"]::-webkit-calendar-picker-indicator { filter: invert(0.5); cursor: pointer; }
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: #0f172a; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.10.3/Recharts.min.js"></script>
  <script>
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
var _React = React,
  useState = _React.useState,
  useMemo = _React.useMemo,
  useRef = _React.useRef;
var _Recharts = Recharts,
  LineChart = _Recharts.LineChart,
  Line = _Recharts.Line,
  BarChart = _Recharts.BarChart,
  Bar = _Recharts.Bar,
  XAxis = _Recharts.XAxis,
  YAxis = _Recharts.YAxis,
  CartesianGrid = _Recharts.CartesianGrid,
  Tooltip = _Recharts.Tooltip,
  ResponsiveContainer = _Recharts.ResponsiveContainer,
  Legend = _Recharts.Legend,
  ReferenceLine = _Recharts.ReferenceLine,
  Area = _Recharts.Area,
  ComposedChart = _Recharts.ComposedChart;
var INCOME_CATEGORIES = ["Áµ¶‰∏é„ÉªÂ†±ÈÖ¨", "Ë≥û‰∏é", "ÂâØÊ•≠„Éª„Éï„É™„Éº„É©„É≥„Çπ", "ÊäïË≥á„ÉªÈÖçÂΩì", "„Åù„ÅÆ‰ªñÂèéÂÖ•"];
var EXPENSE_CATEGORIES = ["Á§æ‰ºö‰øùÈô∫Êñô", "ÂÆüÂÆ∂Á¥çÂÖ•ÂàÜ", "„É≠„Éº„É≥", "Â•®Â≠¶Èáë", "Ê∞¥ÈÅìÂÖâÁÜ±Ë≤ª", "ÂåªÁôÇË≤ª", "‰∫§ÈÄöË≤ª", "„Åù„ÅÆ‰ªñ"];
var CATEGORIES = [].concat(INCOME_CATEGORIES, EXPENSE_CATEGORIES);
var TYPES = ["ÂèéÂÖ•", "ÊîØÂá∫"];
var PERIODS = [{
  key: "day",
  label: "Êó•Ê¨°"
}, {
  key: "week",
  label: "ÈÄ±Ê¨°"
}, {
  key: "month",
  label: "ÊúàÊ¨°"
}, {
  key: "year",
  label: "Âπ¥Ê¨°"
}];
var uid = function uid() {
  return Date.now().toString(36) + Math.random().toString(36).slice(2, 7);
};
var emptyEntry = function emptyEntry() {
  return {
    id: uid(),
    date: new Date().toISOString().slice(0, 10),
    type: "ÊîØÂá∫",
    category: "Á§æ‰ºö‰øùÈô∫Êñô",
    description: "",
    amount: "",
    memo: "",
    receipt: null,
    receiptName: ""
  };
};
var emptyPlan = function emptyPlan() {
  return {
    id: uid(),
    month: new Date().toISOString().slice(0, 7),
    targetBalance: "",
    plannedIncome: "",
    plannedExpense: ""
  };
};
var formatYen = function formatYen(v) {
  if (v === undefined || v === null || v === "") return "‚Äî";
  var n = Number(v);
  if (isNaN(n)) return "‚Äî";
  return (n < 0 ? "-" : "") + "¬•" + Math.abs(n).toLocaleString();
};
var parseMonth = function parseMonth(d) {
  return d.slice(0, 7);
};
var parseWeek = function parseWeek(d) {
  var dt = new Date(d);
  var jan1 = new Date(dt.getFullYear(), 0, 1);
  var wk = Math.ceil(((dt - jan1) / 86400000 + jan1.getDay() + 1) / 7);
  return "".concat(dt.getFullYear(), "-W").concat(String(wk).padStart(2, "0"));
};
var parseYear = function parseYear(d) {
  return d.slice(0, 4);
};
function App() {
  var _useState = useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    setupDone = _useState2[0],
    setSetupDone = _useState2[1];
  var _useState3 = useState(""),
    _useState4 = _slicedToArray(_useState3, 2),
    initialBalance = _useState4[0],
    setInitialBalance = _useState4[1];
  var _useState5 = useState(new Date().toISOString().slice(0, 10)),
    _useState6 = _slicedToArray(_useState5, 2),
    initialDate = _useState6[0],
    setInitialDate = _useState6[1];
  var _useState7 = useState([]),
    _useState8 = _slicedToArray(_useState7, 2),
    entries = _useState8[0],
    setEntries = _useState8[1];
  var _useState9 = useState(emptyEntry()),
    _useState0 = _slicedToArray(_useState9, 2),
    formData = _useState0[0],
    setFormData = _useState0[1];
  var _useState1 = useState("form"),
    _useState10 = _slicedToArray(_useState1, 2),
    view = _useState10[0],
    setView = _useState10[1];
  var _useState11 = useState("entry"),
    _useState12 = _slicedToArray(_useState11, 2),
    activeTab = _useState12[0],
    setActiveTab = _useState12[1];
  var _useState13 = useState("month"),
    _useState14 = _slicedToArray(_useState13, 2),
    period = _useState14[0],
    setPeriod = _useState14[1];
  var _useState15 = useState(null),
    _useState16 = _slicedToArray(_useState15, 2),
    toast = _useState16[0],
    setToast = _useState16[1];
  var _useState17 = useState([]),
    _useState18 = _slicedToArray(_useState17, 2),
    plans = _useState18[0],
    setPlans = _useState18[1];
  var _useState19 = useState(emptyPlan()),
    _useState20 = _slicedToArray(_useState19, 2),
    planForm = _useState20[0],
    setPlanForm = _useState20[1];
  var _useState21 = useState(null),
    _useState22 = _slicedToArray(_useState21, 2),
    receiptPreview = _useState22[0],
    setReceiptPreview = _useState22[1];
  var tableRef = useRef(null);
  var fileRef = useRef(null);
  var showToast = function showToast(msg) {
    setToast(msg);
    setTimeout(function () {
      return setToast(null);
    }, 2500);
  };
  var handleSetup = function handleSetup() {
    if (!initialBalance) {
      showToast("‚ö†Ô∏è ÂàùÊúüÊÆãÈ´ò„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ");
      return;
    }
    setSetupDone(true);
  };
  var handleReceiptUpload = function handleReceiptUpload(file, target, id) {
    if (!file) return;
    var reader = new FileReader();
    reader.onload = function (e) {
      if (target === "form") {
        setFormData(function (p) {
          return _objectSpread(_objectSpread({}, p), {}, {
            receipt: e.target.result,
            receiptName: file.name
          });
        });
      } else {
        setEntries(function (p) {
          return p.map(function (r) {
            return r.id === id ? _objectSpread(_objectSpread({}, r), {}, {
              receipt: e.target.result,
              receiptName: file.name
            }) : r;
          });
        });
      }
    };
    reader.readAsDataURL(file);
  };
  var handleFormChange = function handleFormChange(f, v) {
    return setFormData(function (p) {
      if (f === "type") {
        var defaultCat = v === "ÂèéÂÖ•" ? INCOME_CATEGORIES[0] : EXPENSE_CATEGORIES[0];
        return _objectSpread(_objectSpread({}, p), {}, _defineProperty(_defineProperty({}, f, v), "category", defaultCat));
      }
      return _objectSpread(_objectSpread({}, p), {}, _defineProperty({}, f, v));
    });
  };
  var addFromForm = function addFromForm() {
    if (!formData.amount || !formData.description) {
      showToast("‚ö†Ô∏è ÈáëÈ°ç„Å®ÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ");
      return;
    }
    setEntries(function (p) {
      return [].concat(_toConsumableArray(p), [_objectSpread(_objectSpread({}, formData), {}, {
        id: uid()
      })]);
    });
    setFormData(emptyEntry());
    showToast("‚úÖ ËøΩÂä†„Åó„Åæ„Åó„Åü");
  };
  var updateRow = function updateRow(id, f, v) {
    return setEntries(function (p) {
      return p.map(function (r) {
        return r.id === id ? _objectSpread(_objectSpread({}, r), {}, _defineProperty({}, f, v)) : r;
      });
    });
  };
  var addTableRow = function addTableRow() {
    setEntries(function (p) {
      return [].concat(_toConsumableArray(p), [emptyEntry()]);
    });
    setTimeout(function () {
      var _tableRef$current;
      return (_tableRef$current = tableRef.current) === null || _tableRef$current === void 0 ? void 0 : _tableRef$current.scrollTo({
        top: tableRef.current.scrollHeight,
        behavior: "smooth"
      });
    }, 50);
  };
  var deleteRow = function deleteRow(id) {
    return setEntries(function (p) {
      return p.filter(function (r) {
        return r.id !== id;
      });
    });
  };
  var addPlan = function addPlan() {
    if (!planForm.targetBalance && !planForm.plannedIncome && !planForm.plannedExpense) {
      showToast("‚ö†Ô∏è Â∞ë„Å™„Åè„Å®„ÇÇ1„Å§„ÅÆË®àÁîªÂÄ§„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ");
      return;
    }
    var existing = plans.findIndex(function (p) {
      return p.month === planForm.month;
    });
    if (existing >= 0) {
      setPlans(function (p) {
        return p.map(function (pl, i) {
          return i === existing ? _objectSpread(_objectSpread({}, planForm), {}, {
            id: pl.id
          }) : pl;
        });
      });
      showToast("‚úÖ Ë®àÁîª„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü");
    } else {
      setPlans(function (p) {
        return [].concat(_toConsumableArray(p), [_objectSpread({}, planForm)]);
      });
      showToast("‚úÖ Ë®àÁîª„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü");
    }
    setPlanForm(emptyPlan());
  };
  var exportCSV = function exportCSV() {
    var filled = entries.filter(function (r) {
      return r.description || r.amount;
    });
    if (!filled.length) {
      showToast("‚ö†Ô∏è „Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì");
      return;
    }
    var BOM = "\uFEFF";
    var h = "Êó•‰ªò,Á®ÆÂà•,„Ç´„ÉÜ„Ç¥„É™,ÂÜÖÂÆπ,ÈáëÈ°ç,„É°„É¢\n";
    var b = filled.map(function (r) {
      return "".concat(r.date, ",").concat(r.type, ",").concat(r.category, ",\"").concat(r.description, "\",").concat(r.amount, ",\"").concat(r.memo || "", "\"");
    }).join("\n");
    var blob = new Blob([BOM + h + b], {
      type: "text/csv;charset=utf-8;"
    });
    var a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "cashflow_".concat(new Date().toISOString().slice(0, 10), ".csv");
    a.click();
    showToast("üìÅ CSV„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åæ„Åó„Åü");
  };
  var filled = entries.filter(function (r) {
    return r.description || r.amount;
  });
  var totalIncome = filled.filter(function (r) {
    return r.type === "ÂèéÂÖ•";
  }).reduce(function (s, r) {
    return s + (Number(r.amount) || 0);
  }, 0);
  var totalExpense = filled.filter(function (r) {
    return r.type === "ÊîØÂá∫";
  }).reduce(function (s, r) {
    return s + (Number(r.amount) || 0);
  }, 0);
  var currentBalance = (Number(initialBalance) || 0) + totalIncome - totalExpense;
  var balanceChartData = useMemo(function () {
    if (!filled.length) return [];
    var sorted = _toConsumableArray(filled).sort(function (a, b) {
      return a.date.localeCompare(b.date);
    });
    var groupKey = period === "day" ? function (d) {
      return d;
    } : period === "week" ? parseWeek : period === "month" ? parseMonth : parseYear;
    var groups = {};
    sorted.forEach(function (e) {
      var k = groupKey(e.date);
      if (!groups[k]) groups[k] = {
        income: 0,
        expense: 0
      };
      if (e.type === "ÂèéÂÖ•") groups[k].income += Number(e.amount) || 0;else groups[k].expense += Number(e.amount) || 0;
    });
    var balance = Number(initialBalance) || 0;
    var keys = Object.keys(groups).sort();
    return keys.map(function (k) {
      balance += groups[k].income - groups[k].expense;
      var plan = plans.find(function (p) {
        return p.month === k;
      });
      return {
        period: k,
        ÊÆãÈ´ò: balance,
        ÂèéÂÖ•: groups[k].income,
        ÊîØÂá∫: groups[k].expense,
        Ë®àÁîªÊÆãÈ´ò: plan ? Number(plan.targetBalance) || null : null
      };
    });
  }, [filled, period, initialBalance, plans]);
  var planVsActual = useMemo(function () {
    if (!plans.length) return [];
    return plans.map(function (p) {
      var monthEntries = filled.filter(function (e) {
        return parseMonth(e.date) === p.month;
      });
      var actualIncome = monthEntries.filter(function (e) {
        return e.type === "ÂèéÂÖ•";
      }).reduce(function (s, e) {
        return s + (Number(e.amount) || 0);
      }, 0);
      var actualExpense = monthEntries.filter(function (e) {
        return e.type === "ÊîØÂá∫";
      }).reduce(function (s, e) {
        return s + (Number(e.amount) || 0);
      }, 0);
      return {
        month: p.month,
        Ë®àÁîªÂèéÂÖ•: Number(p.plannedIncome) || 0,
        ÂÆüÁ∏æÂèéÂÖ•: actualIncome,
        Ë®àÁîªÊîØÂá∫: Number(p.plannedExpense) || 0,
        ÂÆüÁ∏æÊîØÂá∫: actualExpense,
        Ë®àÁîªÊÆãÈ´ò: Number(p.targetBalance) || 0,
        ÂèéÂÖ•‰πñÈõ¢: actualIncome - (Number(p.plannedIncome) || 0),
        ÊîØÂá∫‰πñÈõ¢: actualExpense - (Number(p.plannedExpense) || 0)
      };
    }).sort(function (a, b) {
      return a.month.localeCompare(b.month);
    });
  }, [plans, filled]);
  if (!setupDone) {
    return /*#__PURE__*/React.createElement("div", {
      style: S.setupBg
    }, /*#__PURE__*/React.createElement("div", {
      style: S.setupCard
    }, /*#__PURE__*/React.createElement("div", {
      style: S.setupLogo
    }, /*#__PURE__*/React.createElement("span", {
      style: S.setupLogoIcon
    }, "\u20BF")), /*#__PURE__*/React.createElement("h1", {
      style: S.setupTitle
    }, "CashBoard"), /*#__PURE__*/React.createElement("p", {
      style: S.setupDesc
    }, "\u500B\u4EBA\u30AD\u30E3\u30C3\u30B7\u30E5\u30D5\u30ED\u30FC\u7BA1\u7406\u3092\u59CB\u3081\u307E\u3057\u3087\u3046"), /*#__PURE__*/React.createElement("div", {
      style: S.setupFields
    }, /*#__PURE__*/React.createElement("label", {
      style: S.setupLabel
    }, "\u57FA\u6E96\u65E5"), /*#__PURE__*/React.createElement("input", {
      type: "date",
      style: S.setupInput,
      value: initialDate,
      onChange: function onChange(e) {
        return setInitialDate(e.target.value);
      }
    }), /*#__PURE__*/React.createElement("label", {
      style: _objectSpread(_objectSpread({}, S.setupLabel), {}, {
        marginTop: 14
      })
    }, "\u73FE\u9810\u91D1\u6B8B\u9AD8\uFF08\u5186\uFF09"), /*#__PURE__*/React.createElement("input", {
      type: "number",
      style: _objectSpread(_objectSpread({}, S.setupInput), {}, {
        fontFamily: "'DM Mono', monospace",
        fontSize: 22,
        textAlign: "center"
      }),
      placeholder: "1,000,000",
      value: initialBalance,
      onChange: function onChange(e) {
        return setInitialBalance(e.target.value);
      }
    })), /*#__PURE__*/React.createElement("button", {
      style: S.setupBtn,
      onClick: handleSetup
    }, "\u7BA1\u7406\u3092\u958B\u59CB\u3059\u308B \u2192")));
  }
  return /*#__PURE__*/React.createElement("div", {
    style: S.root
  }, /*#__PURE__*/React.createElement("div", {
    style: S.sidebar
  }, /*#__PURE__*/React.createElement("div", {
    style: S.sidebarLogo
  }, /*#__PURE__*/React.createElement("span", {
    style: S.sidebarLogoIcon
  }, "\u20BF"), /*#__PURE__*/React.createElement("span", {
    style: S.sidebarLogoText
  }, "CashBoard")), /*#__PURE__*/React.createElement("div", {
    style: S.navItems
  }, [{
    key: "entry",
    icon: "‚úèÔ∏è",
    label: "„Éá„Éº„ÇøÂÖ•Âäõ"
  }, {
    key: "dashboard",
    icon: "üìä",
    label: "„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ"
  }, {
    key: "plan",
    icon: "üéØ",
    label: "Ë®àÁîªÁÆ°ÁêÜ"
  }].map(function (item) {
    return /*#__PURE__*/React.createElement("button", {
      key: item.key,
      style: activeTab === item.key ? S.navActive : S.navBtn,
      onClick: function onClick() {
        return setActiveTab(item.key);
      }
    }, /*#__PURE__*/React.createElement("span", {
      style: {
        fontSize: 16
      }
    }, item.icon), " ", item.label);
  })), /*#__PURE__*/React.createElement("div", {
    style: S.sidebarFooter
  }, /*#__PURE__*/React.createElement("button", {
    style: S.exportSideBtn,
    onClick: exportCSV
  }, "\u2197 CSV\u51FA\u529B"))), /*#__PURE__*/React.createElement("div", {
    style: S.main
  }, /*#__PURE__*/React.createElement("div", {
    style: S.balanceBar
  }, /*#__PURE__*/React.createElement("div", {
    style: S.balanceItem
  }, /*#__PURE__*/React.createElement("span", {
    style: S.balanceLabel
  }, "\u73FE\u9810\u91D1\u6B8B\u9AD8"), /*#__PURE__*/React.createElement("span", {
    style: _objectSpread(_objectSpread({}, S.balanceValue), {}, {
      color: currentBalance >= 0 ? "#34d399" : "#f87171"
    })
  }, formatYen(currentBalance))), /*#__PURE__*/React.createElement("div", {
    style: S.balanceDivider
  }), /*#__PURE__*/React.createElement("div", {
    style: S.balanceItem
  }, /*#__PURE__*/React.createElement("span", {
    style: S.balanceLabel
  }, "\u7D2F\u8A08\u53CE\u5165"), /*#__PURE__*/React.createElement("span", {
    style: _objectSpread(_objectSpread({}, S.balanceValueSm), {}, {
      color: "#34d399"
    })
  }, "+", formatYen(totalIncome))), /*#__PURE__*/React.createElement("div", {
    style: S.balanceDivider
  }), /*#__PURE__*/React.createElement("div", {
    style: S.balanceItem
  }, /*#__PURE__*/React.createElement("span", {
    style: S.balanceLabel
  }, "\u7D2F\u8A08\u652F\u51FA"), /*#__PURE__*/React.createElement("span", {
    style: _objectSpread(_objectSpread({}, S.balanceValueSm), {}, {
      color: "#f87171"
    })
  }, "-", formatYen(totalExpense))), /*#__PURE__*/React.createElement("div", {
    style: S.balanceDivider
  }), /*#__PURE__*/React.createElement("div", {
    style: S.balanceItem
  }, /*#__PURE__*/React.createElement("span", {
    style: S.balanceLabel
  }, "\u521D\u671F\u6B8B\u9AD8"), /*#__PURE__*/React.createElement("span", {
    style: S.balanceValueSm
  }, formatYen(initialBalance))), /*#__PURE__*/React.createElement("div", {
    style: S.balanceDivider
  }), /*#__PURE__*/React.createElement("div", {
    style: S.balanceItem
  }, /*#__PURE__*/React.createElement("span", {
    style: S.balanceLabel
  }, "\u767B\u9332\u4EF6\u6570"), /*#__PURE__*/React.createElement("span", {
    style: S.balanceValueSm
  }, filled.length, "\u4EF6"))), activeTab === "entry" && /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
    style: S.toggleRow
  }, /*#__PURE__*/React.createElement("div", {
    style: S.toggleGroup
  }, /*#__PURE__*/React.createElement("button", {
    style: view === "form" ? S.togActive : S.togBtn,
    onClick: function onClick() {
      return setView("form");
    }
  }, "\uD83D\uDCDD \u30D5\u30A9\u30FC\u30E0"), /*#__PURE__*/React.createElement("button", {
    style: view === "table" ? S.togActive : S.togBtn,
    onClick: function onClick() {
      return setView("table");
    }
  }, "\uD83D\uDCCA \u30C6\u30FC\u30D6\u30EB"))), view === "form" && /*#__PURE__*/React.createElement("div", {
    style: S.card
  }, /*#__PURE__*/React.createElement("div", {
    style: S.formGrid
  }, /*#__PURE__*/React.createElement(Field, {
    label: "\u65E5\u4ED8"
  }, /*#__PURE__*/React.createElement("input", {
    type: "date",
    style: S.inp,
    value: formData.date,
    onChange: function onChange(e) {
      return handleFormChange("date", e.target.value);
    }
  })), /*#__PURE__*/React.createElement(Field, {
    label: "\u7A2E\u5225"
  }, /*#__PURE__*/React.createElement("select", {
    style: S.inp,
    value: formData.type,
    onChange: function onChange(e) {
      return handleFormChange("type", e.target.value);
    }
  }, TYPES.map(function (t) {
    return /*#__PURE__*/React.createElement("option", {
      key: t
    }, t);
  }))), /*#__PURE__*/React.createElement(Field, {
    label: "\u30AB\u30C6\u30B4\u30EA"
  }, /*#__PURE__*/React.createElement("select", {
    style: S.inp,
    value: formData.category,
    onChange: function onChange(e) {
      return handleFormChange("category", e.target.value);
    }
  }, (formData.type === "ÂèéÂÖ•" ? INCOME_CATEGORIES : EXPENSE_CATEGORIES).map(function (c) {
    return /*#__PURE__*/React.createElement("option", {
      key: c
    }, c);
  }))), /*#__PURE__*/React.createElement(Field, {
    label: "\u91D1\u984D\uFF08\u5186\uFF09"
  }, /*#__PURE__*/React.createElement("input", {
    type: "number",
    style: _objectSpread(_objectSpread({}, S.inp), {}, {
      fontFamily: "'DM Mono', monospace"
    }),
    placeholder: "0",
    value: formData.amount,
    onChange: function onChange(e) {
      return handleFormChange("amount", e.target.value);
    }
  })), /*#__PURE__*/React.createElement("div", {
    style: {
      gridColumn: "1 / -1"
    }
  }, /*#__PURE__*/React.createElement(Field, {
    label: "\u5185\u5BB9"
  }, /*#__PURE__*/React.createElement("input", {
    type: "text",
    style: S.inp,
    placeholder: "\u4F8B: \u30B3\u30F3\u30D3\u30CB \u663C\u98DF",
    value: formData.description,
    onChange: function onChange(e) {
      return handleFormChange("description", e.target.value);
    }
  }))), /*#__PURE__*/React.createElement("div", {
    style: {
      gridColumn: "1 / 3"
    }
  }, /*#__PURE__*/React.createElement(Field, {
    label: "\u30E1\u30E2"
  }, /*#__PURE__*/React.createElement("input", {
    type: "text",
    style: S.inp,
    placeholder: "\u5099\u8003",
    value: formData.memo,
    onChange: function onChange(e) {
      return handleFormChange("memo", e.target.value);
    }
  }))), /*#__PURE__*/React.createElement("div", {
    style: {
      gridColumn: "3 / -1"
    }
  }, /*#__PURE__*/React.createElement(Field, {
    label: "\u30EC\u30B7\u30FC\u30C8\u6DFB\u4ED8"
  }, /*#__PURE__*/React.createElement("div", {
    style: S.receiptRow
  }, /*#__PURE__*/React.createElement("button", {
    style: S.receiptBtn,
    onClick: function onClick() {
      var _fileRef$current;
      return (_fileRef$current = fileRef.current) === null || _fileRef$current === void 0 ? void 0 : _fileRef$current.click();
    }
  }, "\uD83D\uDCCE \u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E"), /*#__PURE__*/React.createElement("input", {
    ref: fileRef,
    type: "file",
    accept: "image/*,.pdf",
    style: {
      display: "none"
    },
    onChange: function onChange(e) {
      return handleReceiptUpload(e.target.files[0], "form");
    }
  }), formData.receipt && /*#__PURE__*/React.createElement("div", {
    style: S.receiptThumb,
    onClick: function onClick() {
      return setReceiptPreview(formData.receipt);
    }
  }, /*#__PURE__*/React.createElement("img", {
    src: formData.receipt,
    alt: "",
    style: S.receiptImg
  }), /*#__PURE__*/React.createElement("span", {
    style: S.receiptName
  }, formData.receiptName)))))), /*#__PURE__*/React.createElement("button", {
    style: S.addBtn,
    onClick: addFromForm
  }, "+ \u30C7\u30FC\u30BF\u3092\u8FFD\u52A0"), filled.length > 0 && /*#__PURE__*/React.createElement("div", {
    style: S.previewSection
  }, /*#__PURE__*/React.createElement("h3", {
    style: S.previewH
  }, "\u5165\u529B\u6E08\u307F (", filled.length, "\u4EF6)"), _toConsumableArray(filled).reverse().map(function (r) {
    return /*#__PURE__*/React.createElement("div", {
      key: r.id,
      style: S.previewItem
    }, /*#__PURE__*/React.createElement("div", {
      style: S.previewL
    }, /*#__PURE__*/React.createElement("span", {
      style: _objectSpread(_objectSpread({}, S.badge), {}, {
        background: r.type === "ÂèéÂÖ•" ? "#052e16" : "#450a0a",
        color: r.type === "ÂèéÂÖ•" ? "#34d399" : "#fca5a5"
      })
    }, r.type), /*#__PURE__*/React.createElement("span", {
      style: S.previewDate
    }, r.date), /*#__PURE__*/React.createElement("span", {
      style: S.previewCategory
    }, r.category), /*#__PURE__*/React.createElement("span", {
      style: S.previewDesc
    }, r.description), r.receipt && /*#__PURE__*/React.createElement("span", {
      style: S.receiptIcon,
      onClick: function onClick() {
        return setReceiptPreview(r.receipt);
      },
      title: "\u30EC\u30B7\u30FC\u30C8\u3092\u8868\u793A"
    }, "\uD83E\uDDFE")), /*#__PURE__*/React.createElement("div", {
      style: S.previewR
    }, /*#__PURE__*/React.createElement("span", {
      style: _objectSpread(_objectSpread({}, S.previewAmt), {}, {
        color: r.type === "ÂèéÂÖ•" ? "#34d399" : "#f87171"
      })
    }, r.type === "ÂèéÂÖ•" ? "+" : "-", formatYen(r.amount)), /*#__PURE__*/React.createElement("button", {
      style: S.delSm,
      onClick: function onClick() {
        return deleteRow(r.id);
      }
    }, "\xD7")));
  }))), view === "table" && /*#__PURE__*/React.createElement("div", {
    style: S.card
  }, /*#__PURE__*/React.createElement("div", {
    style: S.tableScroll,
    ref: tableRef
  }, /*#__PURE__*/React.createElement("table", {
    style: S.table
  }, /*#__PURE__*/React.createElement("thead", null, /*#__PURE__*/React.createElement("tr", null, ["#", "Êó•‰ªò", "Á®ÆÂà•", "„Ç´„ÉÜ„Ç¥„É™", "ÂÜÖÂÆπ", "ÈáëÈ°ç", "„É°„É¢", "üßæ", ""].map(function (h, i) {
    return /*#__PURE__*/React.createElement("th", {
      key: i,
      style: S.th
    }, h);
  }))), /*#__PURE__*/React.createElement("tbody", null, entries.map(function (row, i) {
    return /*#__PURE__*/React.createElement("tr", {
      key: row.id,
      style: i % 2 === 0 ? S.trE : S.trO
    }, /*#__PURE__*/React.createElement("td", {
      style: S.tdN
    }, i + 1), /*#__PURE__*/React.createElement("td", {
      style: S.td
    }, /*#__PURE__*/React.createElement("input", {
      type: "date",
      style: S.ci,
      value: row.date,
      onChange: function onChange(e) {
        return updateRow(row.id, "date", e.target.value);
      }
    })), /*#__PURE__*/React.createElement("td", {
      style: S.td
    }, /*#__PURE__*/React.createElement("select", {
      style: S.cs,
      value: row.type,
      onChange: function onChange(e) {
        var newType = e.target.value;
        var defaultCat = newType === "ÂèéÂÖ•" ? INCOME_CATEGORIES[0] : EXPENSE_CATEGORIES[0];
        updateRow(row.id, "type", newType);
        updateRow(row.id, "category", defaultCat);
      }
    }, TYPES.map(function (t) {
      return /*#__PURE__*/React.createElement("option", {
        key: t
      }, t);
    }))), /*#__PURE__*/React.createElement("td", {
      style: S.td
    }, /*#__PURE__*/React.createElement("select", {
      style: S.cs,
      value: row.category,
      onChange: function onChange(e) {
        return updateRow(row.id, "category", e.target.value);
      }
    }, (row.type === "ÂèéÂÖ•" ? INCOME_CATEGORIES : EXPENSE_CATEGORIES).map(function (c) {
      return /*#__PURE__*/React.createElement("option", {
        key: c
      }, c);
    }))), /*#__PURE__*/React.createElement("td", {
      style: S.td
    }, /*#__PURE__*/React.createElement("input", {
      type: "text",
      style: S.ci,
      placeholder: "\u5185\u5BB9",
      value: row.description,
      onChange: function onChange(e) {
        return updateRow(row.id, "description", e.target.value);
      }
    })), /*#__PURE__*/React.createElement("td", {
      style: S.td
    }, /*#__PURE__*/React.createElement("input", {
      type: "number",
      style: _objectSpread(_objectSpread({}, S.ci), {}, {
        fontFamily: "'DM Mono', monospace",
        textAlign: "right"
      }),
      placeholder: "0",
      value: row.amount,
      onChange: function onChange(e) {
        return updateRow(row.id, "amount", e.target.value);
      }
    })), /*#__PURE__*/React.createElement("td", {
      style: S.td
    }, /*#__PURE__*/React.createElement("input", {
      type: "text",
      style: S.ci,
      placeholder: "\u30E1\u30E2",
      value: row.memo,
      onChange: function onChange(e) {
        return updateRow(row.id, "memo", e.target.value);
      }
    })), /*#__PURE__*/React.createElement("td", {
      style: S.td
    }, row.receipt ? /*#__PURE__*/React.createElement("span", {
      style: {
        cursor: "pointer",
        fontSize: 16
      },
      onClick: function onClick() {
        return setReceiptPreview(row.receipt);
      }
    }, "\uD83E\uDDFE") : /*#__PURE__*/React.createElement("label", {
      style: S.uploadMini
    }, "\uD83D\uDCCE", /*#__PURE__*/React.createElement("input", {
      type: "file",
      accept: "image/*,.pdf",
      style: {
        display: "none"
      },
      onChange: function onChange(e) {
        return handleReceiptUpload(e.target.files[0], "table", row.id);
      }
    }))), /*#__PURE__*/React.createElement("td", {
      style: S.td
    }, /*#__PURE__*/React.createElement("button", {
      style: S.delBtn,
      onClick: function onClick() {
        return deleteRow(row.id);
      }
    }, "\xD7")));
  })))), /*#__PURE__*/React.createElement("button", {
    style: S.addRowBtn,
    onClick: addTableRow
  }, "+ \u884C\u3092\u8FFD\u52A0"))), activeTab === "dashboard" && /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
    style: S.toggleRow
  }, /*#__PURE__*/React.createElement("div", {
    style: S.toggleGroup
  }, PERIODS.map(function (p) {
    return /*#__PURE__*/React.createElement("button", {
      key: p.key,
      style: period === p.key ? S.togActive : S.togBtn,
      onClick: function onClick() {
        return setPeriod(p.key);
      }
    }, p.label);
  }))), /*#__PURE__*/React.createElement("div", {
    style: S.card
  }, /*#__PURE__*/React.createElement("h3", {
    style: S.chartTitle
  }, "\u73FE\u9810\u91D1\u6B8B\u9AD8\u63A8\u79FB"), balanceChartData.length > 0 ? /*#__PURE__*/React.createElement(ResponsiveContainer, {
    width: "100%",
    height: 300
  }, /*#__PURE__*/React.createElement(ComposedChart, {
    data: balanceChartData,
    margin: {
      top: 10,
      right: 20,
      left: 10,
      bottom: 0
    }
  }, /*#__PURE__*/React.createElement("defs", null, /*#__PURE__*/React.createElement("linearGradient", {
    id: "balGrad",
    x1: "0",
    y1: "0",
    x2: "0",
    y2: "1"
  }, /*#__PURE__*/React.createElement("stop", {
    offset: "0%",
    stopColor: "#34d399",
    stopOpacity: 0.3
  }), /*#__PURE__*/React.createElement("stop", {
    offset: "100%",
    stopColor: "#34d399",
    stopOpacity: 0
  }))), /*#__PURE__*/React.createElement(CartesianGrid, {
    strokeDasharray: "3 3",
    stroke: "#1e293b"
  }), /*#__PURE__*/React.createElement(XAxis, {
    dataKey: "period",
    tick: {
      fill: "#94a3b8",
      fontSize: 11,
      fontFamily: "'DM Mono', monospace"
    },
    axisLine: {
      stroke: "#334155"
    }
  }), /*#__PURE__*/React.createElement(YAxis, {
    tick: {
      fill: "#94a3b8",
      fontSize: 11,
      fontFamily: "'DM Mono', monospace"
    },
    axisLine: {
      stroke: "#334155"
    },
    tickFormatter: function tickFormatter(v) {
      return v >= 1e6 ? "".concat((v / 1e6).toFixed(1), "M") : v >= 1e3 ? "".concat((v / 1e3).toFixed(0), "K") : v;
    }
  }), /*#__PURE__*/React.createElement(Tooltip, {
    contentStyle: {
      background: "#1e293b",
      border: "1px solid #334155",
      borderRadius: 8,
      fontSize: 12,
      fontFamily: "'Noto Sans JP'"
    },
    labelStyle: {
      color: "#94a3b8"
    },
    formatter: function formatter(v, name) {
      return [formatYen(v), name];
    }
  }), /*#__PURE__*/React.createElement(Area, {
    type: "monotone",
    dataKey: "\u6B8B\u9AD8",
    stroke: "#34d399",
    fill: "url(#balGrad)",
    strokeWidth: 2.5,
    dot: {
      fill: "#34d399",
      r: 4
    }
  }), balanceChartData.some(function (d) {
    return d.Ë®àÁîªÊÆãÈ´ò;
  }) && /*#__PURE__*/React.createElement(Line, {
    type: "monotone",
    dataKey: "\u8A08\u753B\u6B8B\u9AD8",
    stroke: "#fbbf24",
    strokeWidth: 2,
    strokeDasharray: "6 4",
    dot: {
      fill: "#fbbf24",
      r: 3
    }
  }), /*#__PURE__*/React.createElement(Legend, {
    wrapperStyle: {
      fontSize: 12,
      fontFamily: "'Noto Sans JP'"
    }
  }))) : /*#__PURE__*/React.createElement("div", {
    style: S.noData
  }, "\u30C7\u30FC\u30BF\u3092\u5165\u529B\u3059\u308B\u3068\u30B0\u30E9\u30D5\u304C\u8868\u793A\u3055\u308C\u307E\u3059")), /*#__PURE__*/React.createElement("div", {
    style: S.card
  }, /*#__PURE__*/React.createElement("h3", {
    style: S.chartTitle
  }, "\u53CE\u5165\u30FB\u652F\u51FA \u6BD4\u8F03"), balanceChartData.length > 0 ? /*#__PURE__*/React.createElement(ResponsiveContainer, {
    width: "100%",
    height: 260
  }, /*#__PURE__*/React.createElement(BarChart, {
    data: balanceChartData,
    margin: {
      top: 10,
      right: 20,
      left: 10,
      bottom: 0
    }
  }, /*#__PURE__*/React.createElement(CartesianGrid, {
    strokeDasharray: "3 3",
    stroke: "#1e293b"
  }), /*#__PURE__*/React.createElement(XAxis, {
    dataKey: "period",
    tick: {
      fill: "#94a3b8",
      fontSize: 11,
      fontFamily: "'DM Mono', monospace"
    },
    axisLine: {
      stroke: "#334155"
    }
  }), /*#__PURE__*/React.createElement(YAxis, {
    tick: {
      fill: "#94a3b8",
      fontSize: 11,
      fontFamily: "'DM Mono', monospace"
    },
    axisLine: {
      stroke: "#334155"
    },
    tickFormatter: function tickFormatter(v) {
      return v >= 1e6 ? "".concat((v / 1e6).toFixed(1), "M") : v >= 1e3 ? "".concat((v / 1e3).toFixed(0), "K") : v;
    }
  }), /*#__PURE__*/React.createElement(Tooltip, {
    contentStyle: {
      background: "#1e293b",
      border: "1px solid #334155",
      borderRadius: 8,
      fontSize: 12
    },
    formatter: function formatter(v, name) {
      return [formatYen(v), name];
    }
  }), /*#__PURE__*/React.createElement(Bar, {
    dataKey: "\u53CE\u5165",
    fill: "#34d399",
    radius: [4, 4, 0, 0]
  }), /*#__PURE__*/React.createElement(Bar, {
    dataKey: "\u652F\u51FA",
    fill: "#f87171",
    radius: [4, 4, 0, 0]
  }), /*#__PURE__*/React.createElement(Legend, {
    wrapperStyle: {
      fontSize: 12,
      fontFamily: "'Noto Sans JP'"
    }
  }))) : /*#__PURE__*/React.createElement("div", {
    style: S.noData
  }, "\u30C7\u30FC\u30BF\u3092\u5165\u529B\u3059\u308B\u3068\u30B0\u30E9\u30D5\u304C\u8868\u793A\u3055\u308C\u307E\u3059")), planVsActual.length > 0 && /*#__PURE__*/React.createElement("div", {
    style: S.card
  }, /*#__PURE__*/React.createElement("h3", {
    style: S.chartTitle
  }, "\u8A08\u753B vs \u5B9F\u7E3E \u4E56\u96E2"), /*#__PURE__*/React.createElement(ResponsiveContainer, {
    width: "100%",
    height: 280
  }, /*#__PURE__*/React.createElement(BarChart, {
    data: planVsActual,
    margin: {
      top: 10,
      right: 20,
      left: 10,
      bottom: 0
    }
  }, /*#__PURE__*/React.createElement(CartesianGrid, {
    strokeDasharray: "3 3",
    stroke: "#1e293b"
  }), /*#__PURE__*/React.createElement(XAxis, {
    dataKey: "month",
    tick: {
      fill: "#94a3b8",
      fontSize: 11,
      fontFamily: "'DM Mono', monospace"
    },
    axisLine: {
      stroke: "#334155"
    }
  }), /*#__PURE__*/React.createElement(YAxis, {
    tick: {
      fill: "#94a3b8",
      fontSize: 11,
      fontFamily: "'DM Mono', monospace"
    },
    axisLine: {
      stroke: "#334155"
    },
    tickFormatter: function tickFormatter(v) {
      return v >= 1e6 ? "".concat((v / 1e6).toFixed(1), "M") : v >= 1e3 ? "".concat((v / 1e3).toFixed(0), "K") : v;
    }
  }), /*#__PURE__*/React.createElement(Tooltip, {
    contentStyle: {
      background: "#1e293b",
      border: "1px solid #334155",
      borderRadius: 8,
      fontSize: 12
    },
    formatter: function formatter(v, name) {
      return [formatYen(v), name];
    }
  }), /*#__PURE__*/React.createElement(ReferenceLine, {
    y: 0,
    stroke: "#475569"
  }), /*#__PURE__*/React.createElement(Bar, {
    dataKey: "\u8A08\u753B\u53CE\u5165",
    fill: "#065f46",
    radius: [3, 3, 0, 0]
  }), /*#__PURE__*/React.createElement(Bar, {
    dataKey: "\u5B9F\u7E3E\u53CE\u5165",
    fill: "#34d399",
    radius: [3, 3, 0, 0]
  }), /*#__PURE__*/React.createElement(Bar, {
    dataKey: "\u8A08\u753B\u652F\u51FA",
    fill: "#7f1d1d",
    radius: [3, 3, 0, 0]
  }), /*#__PURE__*/React.createElement(Bar, {
    dataKey: "\u5B9F\u7E3E\u652F\u51FA",
    fill: "#f87171",
    radius: [3, 3, 0, 0]
  }), /*#__PURE__*/React.createElement(Legend, {
    wrapperStyle: {
      fontSize: 11,
      fontFamily: "'Noto Sans JP'"
    }
  }))), /*#__PURE__*/React.createElement("div", {
    style: {
      marginTop: 16
    }
  }, /*#__PURE__*/React.createElement("table", {
    style: _objectSpread(_objectSpread({}, S.table), {}, {
      fontSize: 12
    })
  }, /*#__PURE__*/React.createElement("thead", null, /*#__PURE__*/React.createElement("tr", null, /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u6708"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u8A08\u753B\u53CE\u5165"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u5B9F\u7E3E\u53CE\u5165"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u53CE\u5165\u4E56\u96E2"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u8A08\u753B\u652F\u51FA"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u5B9F\u7E3E\u652F\u51FA"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u652F\u51FA\u4E56\u96E2"))), /*#__PURE__*/React.createElement("tbody", null, planVsActual.map(function (r) {
    return /*#__PURE__*/React.createElement("tr", {
      key: r.month,
      style: S.trE
    }, /*#__PURE__*/React.createElement("td", {
      style: S.tdMono
    }, r.month), /*#__PURE__*/React.createElement("td", {
      style: S.tdMono
    }, formatYen(r.Ë®àÁîªÂèéÂÖ•)), /*#__PURE__*/React.createElement("td", {
      style: S.tdMono
    }, formatYen(r.ÂÆüÁ∏æÂèéÂÖ•)), /*#__PURE__*/React.createElement("td", {
      style: _objectSpread(_objectSpread({}, S.tdMono), {}, {
        color: r.ÂèéÂÖ•‰πñÈõ¢ >= 0 ? "#34d399" : "#f87171",
        fontWeight: 600
      })
    }, r.ÂèéÂÖ•‰πñÈõ¢ >= 0 ? "+" : "", formatYen(r.ÂèéÂÖ•‰πñÈõ¢)), /*#__PURE__*/React.createElement("td", {
      style: S.tdMono
    }, formatYen(r.Ë®àÁîªÊîØÂá∫)), /*#__PURE__*/React.createElement("td", {
      style: S.tdMono
    }, formatYen(r.ÂÆüÁ∏æÊîØÂá∫)), /*#__PURE__*/React.createElement("td", {
      style: _objectSpread(_objectSpread({}, S.tdMono), {}, {
        color: r.ÊîØÂá∫‰πñÈõ¢ <= 0 ? "#34d399" : "#f87171",
        fontWeight: 600
      })
    }, r.ÊîØÂá∫‰πñÈõ¢ >= 0 ? "+" : "", formatYen(r.ÊîØÂá∫‰πñÈõ¢)));
  })))))), activeTab === "plan" && /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
    style: S.card
  }, /*#__PURE__*/React.createElement("h3", {
    style: S.chartTitle
  }, "\u6708\u6B21\u8A08\u753B\u3092\u8A2D\u5B9A"), /*#__PURE__*/React.createElement("p", {
    style: {
      fontSize: 12,
      color: "#64748b",
      margin: "0 0 16px"
    }
  }, "\u6708\u3054\u3068\u306E\u76EE\u6A19\u6B8B\u9AD8\u30FB\u8A08\u753B\u53CE\u5165\u30FB\u8A08\u753B\u652F\u51FA\u3092\u8A2D\u5B9A\u3059\u308B\u3068\u3001\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9\u3067\u5B9F\u7E3E\u3068\u306E\u4E56\u96E2\u3092\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002"), /*#__PURE__*/React.createElement("div", {
    style: {
      display: "grid",
      gridTemplateColumns: "repeat(4, 1fr)",
      gap: 12,
      marginBottom: 16
    }
  }, /*#__PURE__*/React.createElement(Field, {
    label: "\u5BFE\u8C61\u6708"
  }, /*#__PURE__*/React.createElement("input", {
    type: "month",
    style: S.inp,
    value: planForm.month,
    onChange: function onChange(e) {
      return setPlanForm(function (p) {
        return _objectSpread(_objectSpread({}, p), {}, {
          month: e.target.value
        });
      });
    }
  })), /*#__PURE__*/React.createElement(Field, {
    label: "\u76EE\u6A19\u6B8B\u9AD8\uFF08\u5186\uFF09"
  }, /*#__PURE__*/React.createElement("input", {
    type: "number",
    style: _objectSpread(_objectSpread({}, S.inp), {}, {
      fontFamily: "'DM Mono', monospace"
    }),
    placeholder: "0",
    value: planForm.targetBalance,
    onChange: function onChange(e) {
      return setPlanForm(function (p) {
        return _objectSpread(_objectSpread({}, p), {}, {
          targetBalance: e.target.value
        });
      });
    }
  })), /*#__PURE__*/React.createElement(Field, {
    label: "\u8A08\u753B\u53CE\u5165\uFF08\u5186\uFF09"
  }, /*#__PURE__*/React.createElement("input", {
    type: "number",
    style: _objectSpread(_objectSpread({}, S.inp), {}, {
      fontFamily: "'DM Mono', monospace"
    }),
    placeholder: "0",
    value: planForm.plannedIncome,
    onChange: function onChange(e) {
      return setPlanForm(function (p) {
        return _objectSpread(_objectSpread({}, p), {}, {
          plannedIncome: e.target.value
        });
      });
    }
  })), /*#__PURE__*/React.createElement(Field, {
    label: "\u8A08\u753B\u652F\u51FA\uFF08\u5186\uFF09"
  }, /*#__PURE__*/React.createElement("input", {
    type: "number",
    style: _objectSpread(_objectSpread({}, S.inp), {}, {
      fontFamily: "'DM Mono', monospace"
    }),
    placeholder: "0",
    value: planForm.plannedExpense,
    onChange: function onChange(e) {
      return setPlanForm(function (p) {
        return _objectSpread(_objectSpread({}, p), {}, {
          plannedExpense: e.target.value
        });
      });
    }
  }))), /*#__PURE__*/React.createElement("button", {
    style: S.addBtn,
    onClick: addPlan
  }, "+ \u8A08\u753B\u3092\u8FFD\u52A0\u30FB\u66F4\u65B0")), plans.length > 0 && /*#__PURE__*/React.createElement("div", {
    style: S.card
  }, /*#__PURE__*/React.createElement("h3", {
    style: S.chartTitle
  }, "\u8A2D\u5B9A\u6E08\u307F\u8A08\u753B"), /*#__PURE__*/React.createElement("table", {
    style: S.table
  }, /*#__PURE__*/React.createElement("thead", null, /*#__PURE__*/React.createElement("tr", null, /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u6708"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u76EE\u6A19\u6B8B\u9AD8"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u8A08\u753B\u53CE\u5165"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }, "\u8A08\u753B\u652F\u51FA"), /*#__PURE__*/React.createElement("th", {
    style: S.th
  }))), /*#__PURE__*/React.createElement("tbody", null, _toConsumableArray(plans).sort(function (a, b) {
    return a.month.localeCompare(b.month);
  }).map(function (p) {
    return /*#__PURE__*/React.createElement("tr", {
      key: p.id,
      style: S.trE
    }, /*#__PURE__*/React.createElement("td", {
      style: S.tdMono
    }, p.month), /*#__PURE__*/React.createElement("td", {
      style: S.tdMono
    }, formatYen(p.targetBalance)), /*#__PURE__*/React.createElement("td", {
      style: _objectSpread(_objectSpread({}, S.tdMono), {}, {
        color: "#34d399"
      })
    }, formatYen(p.plannedIncome)), /*#__PURE__*/React.createElement("td", {
      style: _objectSpread(_objectSpread({}, S.tdMono), {}, {
        color: "#f87171"
      })
    }, formatYen(p.plannedExpense)), /*#__PURE__*/React.createElement("td", {
      style: S.td
    }, /*#__PURE__*/React.createElement("button", {
      style: S.delBtn,
      onClick: function onClick() {
        return setPlans(function (prev) {
          return prev.filter(function (x) {
            return x.id !== p.id;
          });
        });
      }
    }, "\xD7")));
  })))), /*#__PURE__*/React.createElement("div", {
    style: S.guideBox
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 18
    }
  }, "\uD83D\uDCA1"), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("strong", {
    style: {
      fontSize: 12
    }
  }, "\u4F7F\u3044\u65B9\u30AC\u30A4\u30C9"), /*#__PURE__*/React.createElement("p", {
    style: {
      margin: "4px 0 0",
      fontSize: 11,
      color: "#94a3b8",
      lineHeight: 1.6
    }
  }, "\u2460 \u3053\u3053\u3067\u6708\u3054\u3068\u306E\u8A08\u753B\u5024\u3092\u767B\u9332 \u2192 \u2461 \u300C\u30C7\u30FC\u30BF\u5165\u529B\u300D\u3067\u65E5\u3005\u306E\u53CE\u652F\u3092\u8A18\u9332 \u2192 \u2462 \u300C\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9\u300D\u3067\u6B8B\u9AD8\u63A8\u79FB\u30B0\u30E9\u30D5\uFF06\u8A08\u753B\u3068\u306E\u4E56\u96E2\u3092\u78BA\u8A8D\u3002CSV\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3067Google \u30B9\u30D7\u30EC\u30C3\u30C9\u30B7\u30FC\u30C8\u306B\u3082\u9023\u643A\u3067\u304D\u307E\u3059\u3002"))))), receiptPreview && /*#__PURE__*/React.createElement("div", {
    style: S.modalOverlay,
    onClick: function onClick() {
      return setReceiptPreview(null);
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: S.modalContent,
    onClick: function onClick(e) {
      return e.stopPropagation();
    }
  }, /*#__PURE__*/React.createElement("button", {
    style: S.modalClose,
    onClick: function onClick() {
      return setReceiptPreview(null);
    }
  }, "\xD7"), /*#__PURE__*/React.createElement("img", {
    src: receiptPreview,
    alt: "\u30EC\u30B7\u30FC\u30C8",
    style: S.modalImg
  }))), toast && /*#__PURE__*/React.createElement("div", {
    style: S.toast
  }, toast));
}
function Field(_ref) {
  var label = _ref.label,
    children = _ref.children;
  return /*#__PURE__*/React.createElement("div", {
    style: {
      display: "flex",
      flexDirection: "column",
      gap: 5
    }
  }, /*#__PURE__*/React.createElement("label", {
    style: {
      fontSize: 11,
      fontWeight: 600,
      color: "#94a3b8",
      letterSpacing: "0.04em"
    }
  }, label), children);
}
var S = {
  setupBg: {
    minHeight: "100vh",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    background: "linear-gradient(160deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)",
    fontFamily: "'Noto Sans JP', sans-serif"
  },
  setupCard: {
    background: "linear-gradient(145deg, #1e293b, #0f172a)",
    border: "1px solid #334155",
    borderRadius: 20,
    padding: "48px 40px",
    width: 380,
    textAlign: "center",
    boxShadow: "0 20px 60px rgba(0,0,0,0.5)"
  },
  setupLogo: {
    marginBottom: 16
  },
  setupLogoIcon: {
    display: "inline-flex",
    width: 56,
    height: 56,
    borderRadius: 16,
    background: "linear-gradient(135deg, #34d399, #059669)",
    alignItems: "center",
    justifyContent: "center",
    fontSize: 28,
    fontWeight: 900,
    color: "#fff",
    fontFamily: "'DM Mono', monospace",
    boxShadow: "0 4px 20px rgba(52,211,153,0.3)"
  },
  setupTitle: {
    margin: "8px 0 4px",
    color: "#f1f5f9",
    fontSize: 26,
    fontWeight: 700,
    letterSpacing: "-0.03em"
  },
  setupDesc: {
    color: "#64748b",
    fontSize: 13,
    margin: "0 0 28px"
  },
  setupFields: {
    textAlign: "left",
    marginBottom: 24
  },
  setupLabel: {
    fontSize: 12,
    fontWeight: 600,
    color: "#94a3b8",
    marginBottom: 6,
    display: "block"
  },
  setupInput: {
    width: "100%",
    padding: "12px 14px",
    background: "#0f172a",
    border: "1.5px solid #334155",
    borderRadius: 10,
    color: "#f1f5f9",
    fontSize: 14,
    fontFamily: "'Noto Sans JP', sans-serif",
    outline: "none",
    boxSizing: "border-box"
  },
  setupBtn: {
    width: "100%",
    padding: "14px 0",
    background: "linear-gradient(135deg, #34d399, #059669)",
    color: "#fff",
    border: "none",
    borderRadius: 12,
    fontSize: 15,
    fontWeight: 700,
    cursor: "pointer",
    fontFamily: "'Noto Sans JP', sans-serif",
    boxShadow: "0 4px 16px rgba(52,211,153,0.3)"
  },
  root: {
    display: "flex",
    minHeight: "100vh",
    background: "#0f172a",
    fontFamily: "'Noto Sans JP', sans-serif",
    color: "#e2e8f0"
  },
  sidebar: {
    width: 210,
    background: "#0c1222",
    borderRight: "1px solid #1e293b",
    padding: "20px 12px",
    display: "flex",
    flexDirection: "column",
    flexShrink: 0,
    position: "sticky",
    top: 0,
    height: "100vh",
    boxSizing: "border-box"
  },
  sidebarLogo: {
    display: "flex",
    alignItems: "center",
    gap: 10,
    marginBottom: 28,
    padding: "0 6px"
  },
  sidebarLogoIcon: {
    width: 34,
    height: 34,
    borderRadius: 10,
    background: "linear-gradient(135deg, #34d399, #059669)",
    display: "inline-flex",
    alignItems: "center",
    justifyContent: "center",
    fontSize: 18,
    fontWeight: 900,
    color: "#fff",
    fontFamily: "'DM Mono', monospace"
  },
  sidebarLogoText: {
    fontSize: 16,
    fontWeight: 700,
    color: "#f1f5f9",
    letterSpacing: "-0.02em"
  },
  navItems: {
    display: "flex",
    flexDirection: "column",
    gap: 4,
    flex: 1
  },
  navBtn: {
    display: "flex",
    alignItems: "center",
    gap: 10,
    padding: "10px 14px",
    border: "none",
    background: "transparent",
    color: "#64748b",
    fontSize: 13,
    fontWeight: 500,
    cursor: "pointer",
    borderRadius: 8,
    fontFamily: "'Noto Sans JP', sans-serif",
    textAlign: "left"
  },
  navActive: {
    display: "flex",
    alignItems: "center",
    gap: 10,
    padding: "10px 14px",
    border: "none",
    background: "#1e293b",
    color: "#34d399",
    fontSize: 13,
    fontWeight: 600,
    cursor: "pointer",
    borderRadius: 8,
    fontFamily: "'Noto Sans JP', sans-serif",
    textAlign: "left"
  },
  sidebarFooter: {
    paddingTop: 12,
    borderTop: "1px solid #1e293b"
  },
  exportSideBtn: {
    width: "100%",
    padding: "10px 0",
    border: "1px solid #334155",
    background: "transparent",
    color: "#94a3b8",
    fontSize: 12,
    fontWeight: 500,
    cursor: "pointer",
    borderRadius: 8,
    fontFamily: "'Noto Sans JP', sans-serif"
  },
  main: {
    flex: 1,
    padding: "20px 24px",
    overflowY: "auto",
    maxHeight: "100vh"
  },
  balanceBar: {
    display: "flex",
    alignItems: "center",
    gap: 0,
    padding: "16px 24px",
    background: "linear-gradient(135deg, #1e293b, #0f172a)",
    border: "1px solid #334155",
    borderRadius: 14,
    marginBottom: 18
  },
  balanceItem: {
    flex: 1,
    display: "flex",
    flexDirection: "column",
    gap: 3,
    alignItems: "center"
  },
  balanceDivider: {
    width: 1,
    height: 36,
    background: "#334155"
  },
  balanceLabel: {
    fontSize: 10,
    fontWeight: 500,
    color: "#64748b",
    letterSpacing: "0.06em"
  },
  balanceValue: {
    fontSize: 24,
    fontWeight: 900,
    fontFamily: "'DM Mono', monospace",
    letterSpacing: "-0.03em"
  },
  balanceValueSm: {
    fontSize: 16,
    fontWeight: 600,
    fontFamily: "'DM Mono', monospace",
    color: "#cbd5e1"
  },
  toggleRow: {
    marginBottom: 16
  },
  toggleGroup: {
    display: "flex",
    gap: 6
  },
  togBtn: {
    padding: "9px 18px",
    border: "1px solid #334155",
    background: "transparent",
    borderRadius: 8,
    cursor: "pointer",
    fontSize: 12,
    fontWeight: 500,
    color: "#64748b",
    fontFamily: "'Noto Sans JP', sans-serif"
  },
  togActive: {
    padding: "9px 18px",
    border: "none",
    background: "#334155",
    borderRadius: 8,
    cursor: "pointer",
    fontSize: 12,
    fontWeight: 600,
    color: "#f1f5f9",
    fontFamily: "'Noto Sans JP', sans-serif"
  },
  card: {
    background: "#1e293b",
    border: "1px solid #334155",
    borderRadius: 14,
    padding: 22,
    marginBottom: 16
  },
  formGrid: {
    display: "grid",
    gridTemplateColumns: "repeat(4, 1fr)",
    gap: 12,
    marginBottom: 16
  },
  inp: {
    padding: "10px 12px",
    background: "#0f172a",
    border: "1.5px solid #334155",
    borderRadius: 8,
    color: "#f1f5f9",
    fontSize: 13,
    fontFamily: "'Noto Sans JP', sans-serif",
    outline: "none",
    width: "100%",
    boxSizing: "border-box"
  },
  addBtn: {
    width: "100%",
    padding: "12px 0",
    background: "linear-gradient(135deg, #34d399, #059669)",
    color: "#fff",
    border: "none",
    borderRadius: 10,
    fontSize: 13,
    fontWeight: 700,
    cursor: "pointer",
    fontFamily: "'Noto Sans JP', sans-serif",
    boxShadow: "0 2px 12px rgba(52,211,153,0.25)"
  },
  receiptRow: {
    display: "flex",
    alignItems: "center",
    gap: 10
  },
  receiptBtn: {
    padding: "10px 14px",
    background: "#0f172a",
    border: "1.5px dashed #475569",
    borderRadius: 8,
    color: "#94a3b8",
    fontSize: 12,
    cursor: "pointer",
    fontFamily: "'Noto Sans JP', sans-serif",
    whiteSpace: "nowrap"
  },
  receiptThumb: {
    display: "flex",
    alignItems: "center",
    gap: 6,
    padding: "4px 8px",
    background: "#0f172a",
    borderRadius: 6,
    cursor: "pointer",
    border: "1px solid #334155"
  },
  receiptImg: {
    width: 30,
    height: 30,
    objectFit: "cover",
    borderRadius: 4
  },
  receiptName: {
    fontSize: 11,
    color: "#94a3b8",
    maxWidth: 100,
    overflow: "hidden",
    textOverflow: "ellipsis",
    whiteSpace: "nowrap"
  },
  receiptIcon: {
    cursor: "pointer",
    fontSize: 15
  },
  uploadMini: {
    cursor: "pointer",
    fontSize: 14,
    opacity: 0.5
  },
  previewSection: {
    marginTop: 18,
    borderTop: "1px solid #334155",
    paddingTop: 14
  },
  previewH: {
    fontSize: 12,
    fontWeight: 600,
    color: "#64748b",
    margin: "0 0 10px"
  },
  previewItem: {
    display: "flex",
    justifyContent: "space-between",
    alignItems: "center",
    padding: "9px 12px",
    background: "#0f172a",
    borderRadius: 8,
    marginBottom: 4,
    border: "1px solid #1e293b"
  },
  previewL: {
    display: "flex",
    alignItems: "center",
    gap: 8
  },
  badge: {
    fontSize: 10,
    fontWeight: 700,
    padding: "3px 7px",
    borderRadius: 4
  },
  previewDate: {
    fontSize: 11,
    color: "#64748b",
    fontFamily: "'DM Mono', monospace"
  },
  previewCategory: {
    fontSize: 11,
    color: "#475569"
  },
  previewDesc: {
    fontSize: 12,
    color: "#cbd5e1",
    fontWeight: 500
  },
  previewR: {
    display: "flex",
    alignItems: "center",
    gap: 8
  },
  previewAmt: {
    fontSize: 14,
    fontWeight: 700,
    fontFamily: "'DM Mono', monospace"
  },
  delSm: {
    width: 22,
    height: 22,
    border: "none",
    background: "transparent",
    color: "#475569",
    cursor: "pointer",
    fontSize: 14,
    borderRadius: 4,
    display: "flex",
    alignItems: "center",
    justifyContent: "center"
  },
  tableScroll: {
    overflowX: "auto",
    overflowY: "auto",
    maxHeight: 400
  },
  table: {
    width: "100%",
    borderCollapse: "collapse",
    fontSize: 12
  },
  th: {
    padding: "9px 8px",
    background: "#0f172a",
    borderBottom: "2px solid #334155",
    textAlign: "left",
    fontSize: 10,
    fontWeight: 600,
    color: "#64748b",
    letterSpacing: "0.05em",
    position: "sticky",
    top: 0,
    zIndex: 1
  },
  trE: {
    background: "#1e293b"
  },
  trO: {
    background: "#172033"
  },
  td: {
    padding: "3px 4px",
    borderBottom: "1px solid #0f172a"
  },
  tdN: {
    padding: "3px 6px",
    borderBottom: "1px solid #0f172a",
    textAlign: "center",
    fontSize: 10,
    color: "#475569",
    fontFamily: "'DM Mono', monospace"
  },
  tdMono: {
    padding: "8px",
    borderBottom: "1px solid #0f172a",
    fontSize: 12,
    fontFamily: "'DM Mono', monospace",
    color: "#cbd5e1",
    textAlign: "right"
  },
  ci: {
    width: "100%",
    padding: "7px 6px",
    border: "1px solid transparent",
    borderRadius: 5,
    fontSize: 12,
    fontFamily: "'Noto Sans JP', sans-serif",
    outline: "none",
    background: "transparent",
    color: "#e2e8f0",
    boxSizing: "border-box"
  },
  cs: {
    width: "100%",
    padding: "7px 4px",
    border: "1px solid transparent",
    borderRadius: 5,
    fontSize: 12,
    fontFamily: "'Noto Sans JP', sans-serif",
    outline: "none",
    background: "transparent",
    color: "#e2e8f0",
    cursor: "pointer"
  },
  delBtn: {
    width: 26,
    height: 26,
    border: "none",
    background: "transparent",
    color: "#475569",
    cursor: "pointer",
    fontSize: 14,
    borderRadius: 5,
    display: "flex",
    alignItems: "center",
    justifyContent: "center"
  },
  addRowBtn: {
    width: "100%",
    padding: "10px 0",
    border: "none",
    borderTop: "1px dashed #334155",
    background: "transparent",
    color: "#34d399",
    fontSize: 12,
    fontWeight: 600,
    cursor: "pointer",
    fontFamily: "'Noto Sans JP', sans-serif"
  },
  chartTitle: {
    margin: "0 0 14px",
    fontSize: 14,
    fontWeight: 700,
    color: "#f1f5f9"
  },
  noData: {
    textAlign: "center",
    padding: "40px 0",
    color: "#475569",
    fontSize: 13
  },
  guideBox: {
    display: "flex",
    alignItems: "flex-start",
    gap: 10,
    marginTop: 16,
    padding: "14px 16px",
    background: "#1a1a2e",
    border: "1px solid #334155",
    borderRadius: 12
  },
  modalOverlay: {
    position: "fixed",
    inset: 0,
    background: "rgba(0,0,0,0.8)",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    zIndex: 1000,
    backdropFilter: "blur(4px)"
  },
  modalContent: {
    position: "relative",
    background: "#1e293b",
    borderRadius: 14,
    padding: 16,
    maxWidth: "80vw",
    maxHeight: "80vh"
  },
  modalClose: {
    position: "absolute",
    top: -10,
    right: -10,
    width: 32,
    height: 32,
    border: "none",
    background: "#ef4444",
    color: "#fff",
    fontSize: 16,
    borderRadius: "50%",
    cursor: "pointer",
    display: "flex",
    alignItems: "center",
    justifyContent: "center"
  },
  modalImg: {
    maxWidth: "100%",
    maxHeight: "70vh",
    borderRadius: 8
  },
  toast: {
    position: "fixed",
    bottom: 24,
    left: "50%",
    transform: "translateX(-50%)",
    background: "#f1f5f9",
    color: "#0f172a",
    padding: "12px 24px",
    borderRadius: 10,
    fontSize: 13,
    fontWeight: 600,
    fontFamily: "'Noto Sans JP', sans-serif",
    boxShadow: "0 4px 24px rgba(0,0,0,0.4)",
    zIndex: 999
  }
};
var root = ReactDOM.createRoot(document.getElementById("root"));
root.render(/*#__PURE__*/React.createElement(App, null));
  </script>
</body>
</html>
